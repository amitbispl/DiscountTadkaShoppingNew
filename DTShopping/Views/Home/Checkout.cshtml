@model DTShopping.Models.Dashboard
@{
    ViewBag.Title = "Checkout";
}

<div class="">
    <div class="container">
        <div class="sixteen columns">
            <div class="breadcrumbs_box">
                <a href="http://www.ethemeuk.com" class="headerNavigation1">Top</a><a href="index.php" class="headerNavigation1">Catalog</a><span class="headerNavigation">Create an Account</span>
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="sixteen columns">
        <div id="bodyContent" class="twelve columns omega main_part_wrapper">

            <h1>Checkout</h1>
            <form data-parsley-validate class="validateForm form-horizontal form-style" id="addorderForm" onsubmit="return SaveOrderForm();">
                <div class="contentContainer">
                    <div class="contentText">
                        @Html.HiddenFor(m => m.OrderDetail.point_adjusted, new { name = "pointAdjusted2", id = "pointAdjusted2" })
                        @Html.Hidden("Amount", Model.NetPayment)

                        <table border="0" width="97%" cellspacing="0" cellpadding="2">
                            <tr>
                                <td colspan="2" style="background:#efefef;">
                                    <h3 style="font-family:'Oswald';font-size:16px;">Shipping  Address</h3>
                                </td>
                            </tr>

                            <tr>
                                <td class="fieldKey"><label for="username">Delivery Type</label>:</td>
                                <td class="feWidget">@Html.DropDownListFor(m => Model.OrderDetail.DeliveryType, new SelectList(Model.deliveryTypeList, "Id", "Value"), new { @required = "0", id = "brandDropDown", @class = "form-control" })</td>

                            </tr>

                            <tr>
                                <td class="fieldKey"><label for="username">Business Name</label>:</td>
                                <td class="feWidget">
                                    @Html.HiddenFor(m => m.OrderDetail.user_id)
                                    @Html.HiddenFor(m => m.OrderDetail.id)
                                    @Html.TextBoxFor(m => m.OrderDetail.companyName, new { @type = "text", @id = "companyName", @required = "required", @placeholder = "" })
                                </td>

                            </tr>

                            <tr>
                                <td class="fieldKey"><label for="username">Retailer First Name</label>:</td>
                                <td class="feWidget">
                                    @Html.HiddenFor(m => m.OrderDetail.user_id)
                                    @Html.HiddenFor(m => m.OrderDetail.id)
                                    @Html.TextBoxFor(m => m.OrderDetail.companyName, new { @type = "text", @id = "companyName", @required = "required", @placeholder = "" })
                                </td>

                            </tr>

                            <tr>
                                <td class="fieldKey"><label for="username">Retailer First Name</label>:</td>
                                <td class="feWidget">
                                    @Html.TextBoxFor(m => m.OrderDetail.billing_first_name, new { @type = "text", @id = "first_name", @required = "required", @placeholder = "" })
                                </td>

                            </tr>





                            <tr>


                                <td class="fieldKey"><label for="username">Retailer Last Name</label>:</td>
                                <td class="feWidget">
                                    @Html.TextBoxFor(m => m.OrderDetail.billing_last_name, new { @type = "text", @id = "billing_last_name", @required = "required", @placeholder = "" })
                                </td>
                            </tr>

                            <tr>
                                <td class="fieldKey"><label for="username">Address 1</label>:</td>
                                <td class="feWidget">
                                    @Html.TextBoxFor(m => m.OrderDetail.billing_address_1, new { @type = "text", @id = "billing_address_1", @required = "required", @placeholder = "" })
                                </td>
                            </tr>
                            @*<tr>
                                <td height="30" align="right"><strong>Address 2</strong></td>
                                <td height="30">
                                    @Html.TextBoxFor(m => m.billing_address_2, new { @type = "text", @id = "billing_address_2", @required = "required", @placeholder = "" })
                                </td>
                            </tr>*@

                            <tr>
                                <td class="fieldKey"><label for="username">City</label>:</td>
                                <td class="feWidget">
                                    @Html.TextBoxFor(m => m.OrderDetail.billing_city, new { @type = "text", @id = "billing_city", @required = "required", @placeholder = "" })
                                </td>
                            </tr>

                            <tr>
                                <td class="fieldKey"><label for="username">State</label>:</td>
                                <td class="feWidget">
                                    @Html.TextBoxFor(m => m.OrderDetail.billing_state, new { @type = "text", @id = "billing_state", @required = "required", @placeholder = "" })
                                </td>
                            </tr>

                            <tr>
                                <td class="fieldKey"><label for="username">Zip/Postal Code</label>:</td>
                                <td class="feWidget">
                                    @Html.TextBoxFor(m => m.OrderDetail.billing_postcode, new { @type = "text", @id = "billing_postcode", @required = "required", @placeholder = "" })
                                </td>
                            </tr>

                            <tr>
                                <td class="fieldKey"><label for="username">Phone</label>:</td>
                                <td class="feWidget">
                                    @Html.TextBoxFor(m => m.OrderDetail.billing_phone, new { @type = "text", @id = "billing_phone", @required = "required", @placeholder = "" })
                                </td>
                            </tr>
                            <tr>
                                <td class="fieldKey"><label for="username">Email</label>:</td>
                                <td class="feWidget">
                                    @Html.TextBoxFor(m => m.OrderDetail.billing_email, new { @type = "email", @id = "billing_email", @required = "required", @placeholder = "" })
                                </td>
                            </tr>

                        </table>
                    </div>
                    <label id="loginError1" style="color:red;"></label>
                    <div class="buttonSet">
                        <span class="buttonAction">
                            <button class="unishop_button" id="ConfirmPassword" type="submit">Submit</button>
                        </span>
                    </div>
                </div>  
                </form>         
        </div>       
@Html.Action("getCatHeirarchy", "Home", new { Cat = ViewBag.ParentId, subCat = ViewBag.category })
    </div>
</div>
<script>

    function SaveOrderForm()
    {
        $(".preloader").show();        
        var objorder = $('#addorderForm').serialize();
        
        $.ajax({
            url: '/Home/CreateOrder',
            type: 'Post',
            datatype: 'Json',
            data: objorder
        }).done(function (result) {
            $(".preloader").hide();
            if (result == "Success")
            {
                window.location.href = "/Manage/GetCartProductList?isWithPayment=true";
            }
            ///alert(result.ResponseValue);
            //location.reload();
        }).fail(function (error) {
            $("#error").html(error.statusText);
            $(".preloader").hide();
        });

        return false;
    }
</script>


<script src="~/Scripts/shopping.js"></script>
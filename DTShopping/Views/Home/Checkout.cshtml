@model DTShopping.Models.Dashboard
@{
    ViewBag.Title = "Checkout";
}

<div class="">
    <div class="container">
        <div class="sixteen columns">
            <div class="breadcrumbs_box">
                <a href="http://www.ethemeuk.com" class="headerNavigation1">Top</a><a href="index.php" class="headerNavigation1">Catalog</a><span class="headerNavigation">Create an Account</span>
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="sixteen columns">
        <div id="bodyContent" class="twelve columns omega main_part_wrapper">

            <h1>Checkout</h1>
            <form data-parsley-validate class="validateForm form-horizontal form-style" id="addorderForm" onsubmit="return SaveOrderForm();">
                <table width="98%" cellspacing="0" cellpadding="10" border="0">
                    <tbody>
                        <tr>
                            <td>
                                <table width="100%" cellspacing="1" cellpadding="5" style="border:1px solid #CCCCCC;" class="shoptable">
                                    <tbody>
                                        <tr>
                                            <td colspan="2" bgcolor="#CCCCCC"><h2>Shipping  Address</h2></td>
                                        </tr>

                                        @*<tr>
                                                <td height="30" align="right"><strong>Delivery Type</strong></td>
                                                <td height="30">
                                                    @Html.DropDownListFor(m => Model.OrderDetail.DeliveryType, new SelectList(Model.deliveryTypeList, "Id", "Value"), new { @required = "0", id = "brandDropDown", @class = "form-control" })
                                                </td>
                                            </tr>*@

                                        <tr>
                                            <td height="30" align="right"><strong>Business Name</strong></td>
                                            <td height="30">
                                                @Html.HiddenFor(m => m.OrderDetail.DeliveryType, new { @id = "deliveryType" })
                                                @Html.HiddenFor(m => m.OrderDetail.user_id)
                                                @Html.HiddenFor(m => m.OrderDetail.id)
                                                @Html.TextBoxFor(m => m.OrderDetail.companyName, new { @type = "text", @id = "companyName", @required = "required", @placeholder = "" })
                                            </td>
                                        </tr>

                                        <tr>
                                            <td height="30" align="right"><strong>First Name</strong></td>
                                            <td height="30">
                                                @Html.TextBoxFor(m => m.OrderDetail.billing_first_name, new { @type = "text", @id = "first_name", @required = "required", @placeholder = "" })
                                            </td>
                                        </tr>

                                        <tr>
                                            <td height="30" align="right"><strong>Last Name</strong></td>
                                            <td height="30">
                                                @Html.TextBoxFor(m => m.OrderDetail.billing_last_name, new { @type = "text", @id = "billing_last_name", @required = "required", @placeholder = "" })
                                            </td>
                                        </tr>

                                        <tr>
                                            <td height="30" align="right"><strong>Address 1</strong></td>
                                            <td height="30">
                                                @Html.TextBoxFor(m => m.OrderDetail.billing_address_1, new { @type = "text", @id = "billing_address_1", @required = "required", @placeholder = "" })
                                            </td>
                                        </tr>
                                        <tr>
                                            <td height="30" align="right"><strong>Address 2</strong></td>
                                            <td height="30">
                                                @Html.TextBoxFor(m => m.OrderDetail.billing_address_2, new { @type = "text", @id = "billing_address_2", @placeholder = "" })
                                            </td>
                                        </tr>
                                        <tr>
                                            <td height="30" align="right"><strong>State</strong></td>
                                            <td height="30">
                                                @Html.DropDownListFor(m => m.OrderDetail.billing_state, new SelectList(Model.States, "Id", "Name"), new { @required = "0", id = "stateList", @class = "form-control" })
                                                @*@Html.TextBoxFor(m => m.OrderDetail.billing_state, new { @type = "text", @id = "stateList", @required = "required", @placeholder = "" })*@
                                            </td>
                                        </tr>

                                        <tr>
                                            <td height="30" align="right"><strong>City</strong></td>
                                            <td height="30">
                                                @*@Html.TextBoxFor(m => m.OrderDetail.billing_city, new { @type = "text", @id = "cityList", @required = "required", @placeholder = "" })*@
                                                @Html.DropDownListFor(m => m.OrderDetail.billing_city, new SelectList(Model.Cities, "cityID", "cityName"), new { @required = "0", id = "cityList", @class = "form-control" })
                                            </td>
                                        </tr>

                                        <tr>
                                            <td height="30" align="right"><strong>Pin Code</strong></td>
                                            <td height="30">
                                                @Html.TextBoxFor(m => m.OrderDetail.billing_postcode, new { @type = "number", @max = "999999", @id = "billing_postcode", @required = "required", @placeholder = "" })
                                            </td>
                                        </tr>

                                        <tr>
                                            <td height="30" align="right"><strong>Mobile Number</strong></td>
                                            <td height="30">
                                                @Html.TextBoxFor(m => m.OrderDetail.billing_phone, new { @type = "text", @id = "billing_phone", @required = "required", @placeholder = "" })
                                            </td>
                                        </tr>
                                        <tr>
                                            <td height="30" align="right"><strong>Email</strong></td>
                                            <td height="30">
                                                @Html.TextBoxFor(m => m.OrderDetail.billing_email, new { @type = "email", @id = "billing_email", @required = "required", @placeholder = "" })
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2" align="center">
                                <table width="11%" border="0" cellspacing="0" cellpadding="0">
                                    <tr>
                                        <td>
                                            <div class="buttonSet">
                                                <span class="buttonAction">
                                                    <button class="unishop_button" type="submit">Submit</button>
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">&nbsp;</td>
                        </tr>
                    </tbody>
                </table>
            </form>

        </div>
        @Html.Action("getCatHeirarchy", "Home", new { Cat = ViewBag.ParentId, subCat = ViewBag.category })
    </div>
</div>
<script>

    function SaveOrderForm() {
        $(".preloader").show();
        var objorder = $('#addorderForm').serialize();
        var deliveryTypeVal = $('#deliveryType').val();

        $.ajax({
            url: '/Home/CreateOrder',
            type: 'Post',
            datatype: 'Json',
            data: objorder
        }).done(function (result) {
            $(".preloader").hide();
            if (result == "Success") {
                window.location.href = "/Manage/GetCartProductList?isWithPayment=true&deliveryType=" + deliveryTypeVal;
            }
            ///alert(result.ResponseValue);
            //location.reload();
        }).fail(function (error) {
            $("#error").html(error.statusText);
            $(".preloader").hide();
        });

        return false;
    }
</script>


<script src="~/Scripts/shopping.js"></script>